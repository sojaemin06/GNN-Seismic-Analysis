# GNN 기반 푸쉬오버 곡선 예측 프로젝트 요약

## 1. 프로젝트 개요

### 1.1. 최종 목표
- Graph Neural Network(GNN)를 활용하여 저층 RC 구조물의 비선형 정적해석(푸쉬오버 해석) 결과인 **푸쉬오버 곡선(Pushover Curve)을 신속하게 예측**하는 딥러닝 모델을 개발한다.
- 최종 연구 결과는 **SCI급 해외 학술지 게재**를 목표로 한다.

### 1.2. 개발 전략
- **1단계 (모델 개발):** 다양한 구조 정보를 갖는 건물 데이터셋을 생성하고, 이를 바탕으로 푸쉬오버 곡선을 예측하는 GNN 모델을 개발 및 학습시킨다.
- **2단계 (모델 평가):** GNN 모델의 예측 성능을 공학적으로 의미 있는 지표로 평가한다. 이를 위해, 예측된 푸쉬오버 곡선으로부터 **성능점(Performance Point)을 계산**하고, 실제 해석 결과의 성능점과 비교하여 오차를 분석한다.

---

## 2. 현재까지의 진행 상황

### 2.1. 기반 코드 분석 및 기준 반영
- **'내진성능 평가요령' 검토:** 프로젝트의 신뢰성 확보를 위해 관련 기준을 검토하고 코드에 반영하기로 결정했다.
- **기대강도 적용 완료:** `core/model_builder.py`에서 비선형 해석 시 공칭강도가 아닌 **기대강도**를 사용하도록 수정 완료했다. 이는 평가요령을 준수하고 해석 결과의 정확성을 높이기 위한 핵심적인 수정이었다.
- **질량 산정 방식 논의:** 유효건물중량 산정 시 활하중 및 적설하중 포함 여부를 논의했다. SCI급 논문의 일반성 확보를 위해, 우선 고정하중만을 고려한 **'기본 모델'**로 연구를 진행하고, 추가 하중들은 나중에 **'민감도 분석'**에서 다루는 것으로 결정했다.

### 2.2. 비선형 정적해석(Pushover) 적용 타당성 검증 기능
- **검증 로직 구현:** `core/verification.py`에 고차 모드의 영향을 판단하기 위한 검증 기능을 구현했다.
    - 이 기능은 다중모드 응답스펙트럼해석(RSA)과 1차모드 RSA의 층전단력을 비교하여 그 차이가 130%를 초과하는지 확인한다.
    - 요구 응답 스펙트럼 생성, 모드 해석, RSA 수행 및 결과 비교, 시각화 플롯 저장 기능이 포함되었다.
- **오류 수정:** 초기 구현에서 발생했던 좌표축 설정 오류 및 질량 참여율 계산 오류를 모두 수정하여 정상적으로 작동함을 확인했다.

### 2.3. GNN 데이터셋 구축 준비
- **그래프 표현 방식 논의:** GNN의 입력 데이터 형태에 대해 논의했다.
    - **'절점=노드, 부재=엣지'** 방식을 표준으로 채택하기로 결정했다.
    - 이에 따라, 부재(기둥, 보)의 정보는 **'엣지 특성(Edge Features)'**으로, 절점의 정보는 **'노드 특성(Node Features)'**으로 GNN에 전달하기로 했다.
- **데이터 생성 파이프라인 초안 작성:**
    - `run_single_analysis.py`의 `main` 함수가 해석에 필요한 정보(`model_nodes_info`, `df_curve`)를 반환하도록 수정했다.
    - 데이터셋 생성을 자동화하는 `generate_dataset.py` 스크립트를 생성했다. 이 스크립트는 다양한 구조 파라미터를 조합하여 해석을 반복 실행하고, 결과로부터 그래프 데이터와 정답(푸쉬오버 곡선)을 추출하여 저장하는 기본 골격을 갖추고 있다.

---

## 3. 향후 구현 목표 (Next Steps)

### 3.1. 1단계: 데이터셋 생성 파이프라인 완성
1.  **그래프 데이터 추출 기능 구체화:**
    - `generate_dataset.py`의 `extract_graph_data` 함수를 상세히 구현해야 한다.
    - **노드 특성:** 절점의 좌표, 경계조건 등을 추출하여 텐서로 변환한다.
    - **엣지 특성:** 부재의 종류(기둥/보), 단면 크기(폭, 높이) 등 핵심 물리적 정보를 추출하여 텐서로 변환한다.
2.  **대규모 데이터셋 생성:**
    - `generate_dataset.py`의 파라미터 범위를 확장하고, 멀티프로세싱 등을 적용하여 수백~수천 개 규모의 데이터셋을 안정적으로 생성한다.

### 3.2. 2단계: GNN 모델 구현 및 학습
1.  **GNN 모델 정의:**
    - `gnn/models.py` 파일을 생성하고, **엣지 특성을 처리할 수 있는** GNN 아키텍처(예: GAT, MessagePassing 기반 모델)를 PyTorch와 PyG를 사용하여 설계한다.
2.  **학습/평가 스크립트 작성:**
    - `gnn/train.py` 파일을 생성하여 데이터셋 로드, 모델 학습, 손실 함수 계산, 검증 및 테스트를 수행하는 전체 파이프라인을 구현한다.

### 3.3. 3단계: 모델 평가 및 후속 연구
1.  **성능점 산정 기능 구현:**
    - `post_processor.py`에 역량스펙트럼법(CSM)을 구현하여 GNN이 예측한 곡선으로부터 성능점을 계산하고, 이를 실제 해석 결과와 비교하여 모델의 공학적 성능을 최종 평가한다.
2.  **민감도 분석 수행:**
    - 질량 파라미터(활하중, 적설하중) 변화에 따른 GNN 예측 성능 변화를 분석하여 연구의 깊이를 더한다.
